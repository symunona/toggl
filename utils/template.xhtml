<!DOCTYPE html>
<html>
<head>
    <title><%= title %> - Invoice</title>
    <style>
        :root{
            --border: #777;
        }

        body{ width: 900px; display: block; margin: 0 auto}
        table {padding: 20px 0 20px; border-spacing: 0;}
        .details{width: 100%}
        footer table {width: 100%}
        .description{text-align: left;}
        .price{ text-align: right; width: 100px}
        .time{text-align: center; width: 100px}
        tfoot{margin-top: 10px}
        .details thead tr td {border-bottom: 1px solid var(--border)}
        .details tbody tr:last-child td {border-bottom: 1px solid var(--border)}
        .chf.top td {border-top: 1px solid var(--border)}
    </style>
</head>
<body>
    <header>
        <table>
            <tr>
                <td>ID:</td>
                <td><%= invoice.id %></td>
            </tr>
            <tr>
                <td>Date</td>
                <td><%= m(invoice.date).format(DF) %></td>
            </tr>
            <tr>
                <td>Due</td>
                <td><%= m(invoice.due).format(DF) %></td>
            </tr>
            <tr>
                <td>Period</td>
                <td><%= period %></td>
            </tr>
            <tr>
                <td colspan="2"><%= exchangeRate %></td>
                <td></td>
            </tr>
        </table>
        <p>
            <%= invoice.client %><br/>
        </p>
    </header>
    <div>
        <table class="details">
            <thead>
                <tr>
                    <th class="description">task description</th>
                    <th class="time">time<br/>hh:mm</th>
                    <th class="price">hourly<br/><%= invoice.currency %> / h</th>
                    <th class="price">price<br/><%= invoice.currency %></th>
                </tr>
            </thead>
            <tbody>
                <% _.each( invoice.items, (item) => { %>
                <tr>
                    <td class="description"><%= item.description %></td>
                    <td class="time"><%= f(item.durationMinutes) %></td>
                    <td class="price"><%= invoice.hourlyPriceNet %></td>
                    <td class="price"><%= item.netPrice %></td>
                </tr>
                <% }) %>
            </tbody>

            <tfoot>
                <tr>
                    <td> SUM NET in <%= invoice.currency %></td>
                    <td class="time"> <%= f(invoice.sumTimeMinutes) %></td>
                    <td colspan="2" class="price"><%= invoice.sumNet %> <%= invoice.currency %></td>
                </tr>
                <tr>
                    <td colspan="3"> SUM GROSS in <%= invoice.currency %> incl <%= invoice.vat %>% VAT</td>
                    <td class="price"><strong><%= invoice.sumGross %> <%= invoice.currency %></strong></td>
                </tr>
                <% if (invoice.currency !== 'CHF') { %>
                <tr class="chf top">
                    <td colspan="3"> SUM GROSS in CHF</td>
                    <td class="price"><%= invoice.sumNetChf %> CHF</td>
                </tr>
                <tr class="chf">
                    <td colspan="3"> SUM GROSS in CHF incl <%= invoice.vat %>% VAT</td>
                    <td class="price"><strong><%= invoice.sumGrossChf %> CHF</strong></td>
                </tr>
                <% } %>
            </tfoot>
        </table>
    </div>
    <footer>
        <table>
            <tbody>
                <tr>
                    <td><%= invoice.company.name %></td>
                    <td>BANK: <%= invoice.company.bank %></td>
                </tr>
                <tr>
                    <td><%= invoice.company.address %></td>
                    <td>TAX: <%= invoice.company.tax %></td>
                </tr>
                <tr>
                    <td><%= invoice.company.email %></td>
                    <td><%= invoice.company.web %></td>
                </tr>
            </tbody>
        </table>
    </footer>
</body>
</html>